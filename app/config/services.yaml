# Конфигурация сервисов
services:
    # Конфигурация по умолчанию для сервисов в папке src/
    _defaults:
        autowire: true
        autoconfigure: true
        public: false

    # Регистрируем все контроллеры как публичные сервисы
    App\Controller\:
        resource: '../src/Controller/'
        public: true
        tags: ['controller.service_arguments']

    App\Service\:
        resource: '../src/Service/'

    App\Domain\:
        resource: '../src/Domain/'

    App\Interface\:
        resource: '../src/Interface/'

    # Явно регистрируем Post как реализацию PostInterface
    App\Interface\PostInterface:
        alias: App\Domain\MarkdownPost

     # Явно регистрируем TranslationService как реализацию TranslationInterface
    App\Interface\TranslationInterface:
        alias: App\Service\TranslationService

    # Явно регистрируем MarkdownConverterService как реализацию ConverterInterface
    App\Interface\ConverterInterface:
        alias: App\Service\MarkdownConverterService

    ParsedownExtra:
        class: ParsedownExtra
        public: true

    # Регистрируем Twig как сервис
    Twig\Environment:
        arguments:
            $loader: '@Twig\Loader\FilesystemLoader'
        calls:
            - method: setCache
              arguments: ['%kernel.cache_dir%/twig']
            - method: enableDebug
              arguments: [true]
            - method: enableAutoReload
              arguments: [true]

    Twig\Loader\FilesystemLoader:
        arguments:
            $paths: ['%kernel.project_dir%/templates'] 